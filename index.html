<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>查找接口</title>
    <script>
        function findBalance() {
            var address = document.getElementById("addressInput").value;
            var apiUrl = "https://src20.woofswap.finance/src-20/balance?address=" + address;

            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    displayResult(data);
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert("发生错误，请查看控制台了解详情");
                });
        }

        function displayResult(data) {
            var resultContainer = document.getElementById("resultContainer");

            // 清空之前的结果
            resultContainer.innerHTML = "";

            // 检查接口返回的code是否为200，表示成功
            if (data.code === 200) {
                var responseObj = data.responseObj[0];


                let res = 0
                if (responseObj.balance) {
                     res = responseObj.balance / 10000000 
                }
                
                
                // 创建并添加结果元素
                var resultElement = document.createElement("div");
                resultElement.innerHTML = `
                    <p><strong>钱包地址：</strong> ${responseObj.walletAddress}</p>
                    <p><strong>代币：</strong> ${responseObj.tick}</p>
                    <p><strong>余额（币数）：</strong> ${responseObj.balance}</p>
                    <p><strong>余额 (张数)：</strong> ${res}</p>
                `;
                resultContainer.appendChild(resultElement);
            } else {
                alert("接口返回错误：" + data.msg);
            }
        }
    </script>
</head>
<body>
    <h1>查找接口</h1>
    <label for="addressInput">地址：</label>
    <input type="text" id="addressInput" placeholder="输入地址">
    <button onclick="findBalance()">查找</button>

    <!-- 用于显示结果的容器 -->
    <div id="resultContainer"></div>
</body>
</html>
